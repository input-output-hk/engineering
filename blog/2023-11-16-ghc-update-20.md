---
slug: 2023-11-16-ghc-update
title: "IOG GHC Update #20"
authors: [sylvain,doyougnu,luite,josh]
tags: [ghc,ghc-update]
---

Triweekly update from the GHC DevX team at IOG.

<!-- truncate -->

Previous updates can be found [here](https://engineering.iog.io/tags/ghc-update).

## JS backend

## Misc

Sylvain: helped debugging
[iserv-proxy-interpreter](https://gitlab.haskell.org/ghc/iserv-proxy) which was
failing with `internal error:Evaluated a CAF that was GC'd!` (see [iserv-proxy!1](https://gitlab.haskell.org/ghc/iserv-proxy/-/merge_requests/1)).
It turned out that this interpreter didn't disable CAF garbage collection contrary to
[GHC](https://gitlab.haskell.org/ghc/ghc/-/blob/master/compiler/cbits/keepCAFsForGHCi.c)
and the non-proxy [external
interpreter](https://gitlab.haskell.org/ghc/ghc/-/blob/master/utils/iserv/cbits/iservmain.c).

Sylvain: fixed a compiler panic triggered by some package database state with
unusable packages
[GHC!11604](https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11604).
This has been reported quite a few times on the GHC tracker [GHC#21097](https://gitlab.haskell.org/ghc/ghc/-/issues/21097),
[GHC#11050](https://gitlab.haskell.org/ghc/ghc/-/issues/11050), [GHC#16996](https://gitlab.haskell.org/ghc/ghc/-/issues/16996),
and internally on IOG channels. Before that a workaround was to delete cabal-install's store (`~/.cabal/store` on Linux).
