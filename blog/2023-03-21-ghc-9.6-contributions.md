---
slug: 2023-03-21-ghc-9.6-contrib
title: "IOG's contributions to GHC 9.6"
authors: [sylvain]
tags: [ghc]
---

This post summarizes our contributions to GHC 9.6.1 which has been [released a
few weeks
ago](https://www.haskell.org/ghc/blog/20230310-ghc-9.6.1-released.html).

## JavaScript backend

Our main contribution is the newer JavaScript backend. You can read more about
it in the ([announcement blog
post](https://engineering.iog.io/2022-12-13-ghc-js-backend-merged)). In the
medium term it should become a replacement for GHCJS, but as of 9.6.1 the
JavaScript backend isn't yet on par with GHCJS.

For example, the implementation of the Template Haskell for the JavaScript
backend didn't make it into the 9.6.1 release.
However it is now ready and has been backported to unofficial branches of GHC
9.6.1. An easy way to use is via Haskell.nix as follows:

> haskell.nix instructions to get a JS compiler with TH

Other features may be backported into the 9.6 branch this way (e.g. [foreign
callback](https://gitlab.haskell.org/ghc/ghc/-/merge_requests/10128)).

## GHCi support for optimized Haskell

Work is in progress to make the GHC interpreter (GHCi) support optimized
Haskell. See [this blog
post](https://well-typed.com/blog/2023/02/interface-files-with-core/) for more
details.

Our contributions to this line of work are:

- Adding support for the `prim` calling convention to GHCi
  ([commit](https://gitlab.haskell.org/ghc/ghc/-/commit/45426a6d60a2f8416c462f10eddc7e3f2ff748ce))

- Adding support for sized literals in GHCi
  ([commit](https://gitlab.haskell.org/ghc/ghc/-/commit/7679d3ef4e1afa0a48c0f8f422e3302f27863eeb))

- Changing GHCi bytecode return convention for unlifted datatypes
  ([commit](https://gitlab.haskell.org/ghc/ghc/-/commit/ad8f3e150a895bfd3f8e2936be616ebfc4f531c6))

## Cross-compilation

- Fixed support for cross-compilation to Windows in GHC's build system
  ([MR](https://gitlab.haskell.org/ghc/ghc/-/merge_requests/9310))

- Add some support for plugins in cross-compilers
  ([commit](https://gitlab.haskell.org/ghc/ghc/-/commit/f95bbdcae3e6710a92dd8244321677eef91890de))

## RTS

- Fixed a linker bug with aligned sections
  ([commit](https://gitlab.haskell.org/ghc/ghc/-/commit/2d7ca624481e7f4751f83661acc2a183268b52b0))

