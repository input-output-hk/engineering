<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">IOG GHC Update #26 | IOG Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://engineering.iog.io/2024-03-21-ghc-update"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="IOG GHC Update #26 | IOG Engineering"><meta data-react-helmet="true" name="description" content="Triweekly update from the GHC DevX team at IOG."><meta data-react-helmet="true" property="og:description" content="Triweekly update from the GHC DevX team at IOG."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2024-03-21T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://iog.io/en/"><meta data-react-helmet="true" property="article:tag" content="ghc,ghc-update"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://engineering.iog.io/2024-03-21-ghc-update"><link data-react-helmet="true" rel="alternate" href="https://engineering.iog.io/2024-03-21-ghc-update" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://engineering.iog.io/2024-03-21-ghc-update" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.10ad4647.css">
<link rel="preload" href="/assets/js/runtime~main.aea9cbda.js" as="script">
<link rel="preload" href="/assets/js/main.ab76ff8a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/iohk-logo.png" alt="IOG" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/iohk-logo-inverted.png" alt="IOG" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Engineering</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Recent</a><a class="navbar__item navbar__link" href="/tags">Tags</a><a class="navbar__item navbar__link" href="/archive">Archive</a></div><div class="navbar__items navbar__items--right"><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-12-19-ghc-update">IOG GHC Update #39</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-11-28-ghc-update">IOG GHC Update #38</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-11-07-ghc-update">IOG GHC Update #37</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-10-17-ghc-update">IOG GHC Update #36</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-09-26-ghc-update">IOG GHC Update #35</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-09-05-ghc-update">IOG GHC Update #34</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-08-15-ghc-update">IOG GHC Update #33</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-07-24-ghc-update">IOG GHC Update #32</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-07-08-ghc-update">IOG GHC Update #31</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-06-17-ghc-update">IOG GHC Update #30</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-05-23-ghc-update">IOG GHC Update #29</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-05-02-ghc-update">IOG GHC Update #28</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-04-11-ghc-update">IOG GHC Update #27</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/2024-03-21-ghc-update">IOG GHC Update #26</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-02-29-ghc-update">IOG GHC Update #25</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-02-08-ghc-update">IOG GHC Update #24</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-01-18-ghc-update">IOG GHC Update #23</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2024-01-04-ghc-update">IOG GHC Update #22</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2023-12-07-ghc-update">IOG GHC Update #21</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2023-11-16-ghc-update">IOG GHC Update #20</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">IOG GHC Update #26</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2024-03-21T00:00:00.000Z" itemprop="datePublished">March 21, 2024</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a itemprop="url"><span itemprop="name">Sylvain Henry</span></a></div><small class="avatar__subtitle" itemprop="description">Haskell DevX Engineer @ IOG</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://iog.io/en/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jeffrey M. Young</span></a></div><small class="avatar__subtitle" itemprop="description">Haskell DevX Engineer @ IOG</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a itemprop="url"><span itemprop="name">Luite Stegeman</span></a></div><small class="avatar__subtitle" itemprop="description">Haskell DevX Engineer @ IOG</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Triweekly update from the GHC DevX team at IOG.</p><p>Previous updates can be found <a href="https://engineering.iog.io/tags/ghc-update" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â€‹</a></h2><p>The team contributed to fixing issues blocking the GHC 9.10 alpha 1 release.</p><p>We continued investigating <code>cardano-node</code> performance and found that the lack of specialization
of polymorphic functions is causing a large amount of allocations. Manually removing the polymorphism
caused the amount of allocations to drop by 50% in one instance.</p><p>We summarized the results of the IOG internal Haskel Tooling survey we conducted in January 2024.
A summary of the results can be found in the last section of this blog post. According to the results,
we should continue to work on improving compiler performance, documentation, and profiling tools. We should also
begin to work on improving HLS stability and performance.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">â€‹</a></h2><ul><li><p>Jeff/Sylvain: investigated and fixed an issue with the &quot;Non-punning list and
tuple syntax&quot; patch
(<a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/12130" target="_blank" rel="noopener noreferrer">GHC!12130</a>,
<a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/8820" target="_blank" rel="noopener noreferrer">GHC!8820</a>),
delaying GHC 9.10 alpha release.</p></li><li><p>Sylvain: summarized results of IOG internal Haskell Tooling survey conducted in January 2024 (summary below).</p></li><li><p>Sylvain: reviewed <a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/12179" target="_blank" rel="noopener noreferrer">GHC!12179</a>. Opened <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/24566" target="_blank" rel="noopener noreferrer">GHC#24566</a> as a follow-up issue and fixed it in <a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/12268" target="_blank" rel="noopener noreferrer">GHC!12268</a></p></li><li><p>Sylvain/Josh: made some JS numeric primitives faster by aoviding the use of BigInt <a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/12125" target="_blank" rel="noopener noreferrer">GHC!12125</a></p></li><li><p>Luite: Worked on experimental GHC tooling to investigate a performance regression in <code>cardano-node</code>. Some new things tried were: Profiling by sampling STG call stacks (using <code>libdw</code> to resolve symbol names), call-site ticky counters for dictionary passing, building a dynamic call graph by recording all calls in the whole program. So far, this has led the the identification of a specific issue where GHC failed to specialize, resulting in an excessive amount of allocation.</p></li><li><p>Jeff: started characterizing preformance of Haskell codes with and without the tables-next-to-code optimization</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="iog-internal-haskell-tooling-survey-2024">IOG internal Haskell Tooling survey 2024<a class="hash-link" href="#iog-internal-haskell-tooling-survey-2024" title="Direct link to heading">â€‹</a></h2><p>The Haskell Tooling Survey 2024 revealed insights into users&#x27; experiences, challenges, and desires for improvement across various tools in the Haskell ecosystem:</p><p><strong>GHC:</strong></p><ul><li>Users expressed concerns about slow compilation times, especially on low-power devices, and desires for a lightweight toolchain with a small runtime and quick installation process. Some also highlighted worries about the declining popularity of Haskell and its potential impact on the language&#x27;s future.</li></ul><p><strong>Cabal:</strong></p><ul><li>Users reported frustrations with Cabal, including issues with rebuilding dependencies unnecessarily, confusing solver errors, and its aging build system. Desired improvements included simplifying the Cabal build process, better documentation, and integration with other languages.</li></ul><p><strong>Haskell Language Server (HLS):</strong></p><ul><li>HLS users faced daily annoyances such as slow performance, crashes, and flakiness. Desired improvements included better integration with GHC, addressing polyrepo structure issues, and fixing specific template Haskell-related problems.</li></ul><p><strong>haskell.nix:</strong></p><ul><li>Users desired improvements to haskell.nix, including cleaning up documentation, providing more canonical examples, and addressing issues like unnecessary recompilation of libraries.</li></ul><p><strong>IDEs and Editors:</strong></p><ul><li>Users expressed a need for better IDE support, with desires for faster and more robust IDEs comparable to modern IDEs like IntelliJ. They also highlighted challenges in setting up tools like HLS with Nix and VSCodium.</li></ul><p><strong>Documentation and Learning Material:</strong></p><ul><li>Suggestions included the creation of a completed Haskell optimization handbook, improvement of Cabal documentation, and more comprehensive resources for onboarding new developers.</li></ul><p><strong>GHC&#x27;s WebAssembly/JavaScript Backends:</strong></p><ul><li>Interest in using GHC&#x27;s WebAssembly/JavaScript backends varied, with some expressing likelihood of use for GUIs and mobile devices, while others cited limitations in library compatibility as barriers to adoption.</li></ul><p><strong>Debugging and Analyzing Tools:</strong></p><ul><li>Responses varied regarding satisfaction with debugging and analyzing tools, with some users desiring a more integrated experience and others finding the existing tools adequate.</li></ul><p><strong>Future Concerns:</strong></p><ul><li>Users expressed worries about the declining popularity of Haskell, undisciplined use of language extensions, potential company bankruptcies affecting support for GHC, competition from other languages, and lack of full-time maintenance resources.</li></ul><p><strong>Desired Changes:</strong></p><ul><li>Users desired improvements such as a lightweight toolchain, better support for ambiguous record fields, increased full-time tooling contributors, improved cross-platform build process, and a focus on regaining Haskell&#x27;s status as a language of innovation.</li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/ghc">ghc</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/ghc-update">ghc-update</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/input-output-hk/engineering/tree/master/blog/2024-03-21-ghc-update-26.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2024-04-11-ghc-update"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">IOG GHC Update #27</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2024-02-29-ghc-update"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">IOG GHC Update #25</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#high-level-summary" class="table-of-contents__link toc-highlight">High level summary</a></li><li><a href="#details" class="table-of-contents__link toc-highlight">Details</a></li><li><a href="#iog-internal-haskell-tooling-survey-2024" class="table-of-contents__link toc-highlight">IOG internal Haskell Tooling survey 2024</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/iog_eng" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://iohk.io/en/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">IOG Blog</a></li><li class="footer__item"><a href="https://github.com/input-output-hk/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 IOG Engineering, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aea9cbda.js"></script>
<script src="/assets/js/main.ab76ff8a.js"></script>
</body>
</html>