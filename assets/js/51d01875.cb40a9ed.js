"use strict";(globalThis.webpackChunkengineering_iog_io=globalThis.webpackChunkengineering_iog_io||[]).push([[1238],{5608:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>g});var a=n(8168),r=(n(6540),n(5680));const i={slug:"2023-10-26-ghc-update",title:"IOG GHC Update #19",authors:["sylvain","doyougnu","luite","josh"],tags:["ghc","ghc-update"]},o=void 0,l={permalink:"/2023-10-26-ghc-update",editUrl:"https://github.com/input-output-hk/engineering/tree/master/blog/2023-10-26-ghc-update-19.md",source:"@site/blog/2023-10-26-ghc-update-19.md",title:"IOG GHC Update #19",description:"Triweekly update from the GHC DevX team at IOG.",date:"2023-10-26T00:00:00.000Z",formattedDate:"October 26, 2023",tags:[{label:"ghc",permalink:"/tags/ghc"},{label:"ghc-update",permalink:"/tags/ghc-update"}],readingTime:1.335,hasTruncateMarker:!0,authors:[{name:"Sylvain Henry",title:"Haskell DevX Engineer @ IOG",email:"sylvain.henry@iohk.io",key:"sylvain"},{name:"Jeffrey M. Young",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"doyougnu"},{name:"Luite Stegeman",title:"Haskell DevX Engineer @ IOG",email:"luite.stegeman@iohk.io",key:"luite"},{name:"Joshua Meredith",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"josh"}],frontMatter:{slug:"2023-10-26-ghc-update",title:"IOG GHC Update #19",authors:["sylvain","doyougnu","luite","josh"],tags:["ghc","ghc-update"]},prevItem:{title:"IOG GHC Update #20",permalink:"/2023-11-16-ghc-update"},nextItem:{title:"Internship in GHC at IOG",permalink:"/2023-10-25-internship"}},s={authorsImageUrls:[void 0,void 0,void 0,void 0]},g=[{value:"Stability",id:"stability",level:2},{value:"Maintenance",id:"maintenance",level:2},{value:"JS backend",id:"js-backend",level:2}],p={toc:g},h="wrapper";function c({components:e,...t}){return(0,r.yg)(h,(0,a.A)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Triweekly update from the GHC DevX team at IOG."),(0,r.yg)("p",null,"Previous updates can be found ",(0,r.yg)("a",{parentName:"p",href:"https://engineering.iog.io/tags/ghc-update"},"here"),"."),(0,r.yg)("h2",{id:"stability"},"Stability"),(0,r.yg)("p",null,"We've published Bartek's blog post about his internship at IOG on GHC stability features: ",(0,r.yg)("a",{parentName:"p",href:"https://engineering.iog.io/2023-10-25-internship"},"https://engineering.iog.io/2023-10-25-internship")),(0,r.yg)("h2",{id:"maintenance"},"Maintenance"),(0,r.yg)("p",null,"Sylvain: fixed out-of-bounds array access bug in ",(0,r.yg)("inlineCode",{parentName:"p"},"ghc-bignum"),".\nSee ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/24066"},"GHC#24066"),"\nand ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11412"},"GHC!11412"),"."),(0,r.yg)("p",null,"Sylvain: got access to a big-endian PowerPC architectures on the ",(0,r.yg)("a",{parentName:"p",href:"https://portal.cfarm.net/"},"GCC Compile\nFarm")," and started debugging endianness-related ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/?label_name%5B%5D=big-endian"},"GHC bugs"),".\nSee ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/18431"},"GHC#18431"),", ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/23387"},"GHC#23387"),", ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11473"},"GHC!11473"),"."),(0,r.yg)("h2",{id:"js-backend"},"JS backend"),(0,r.yg)("p",null,"Sylvain: worked on improving support for C sources with the JS backend\n(e.g. to link with ",(0,r.yg)("inlineCode",{parentName:"p"},"sqlite")," compiled to JavaScript/Wasm with Emscripten).\nThe work is still in progress and you can follow progresses in\n",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11502"},"GHC!11502"),".\nSee also related refactoring merge requests ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11437"},"GHC!11437"),"\nand ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11504"},"GHC!11504"),"."),(0,r.yg)("p",null,"Josh: merged documentation on replacing C FFI functions in libraries for the JS backend.\nSee ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11291"},"GHC!11291")),(0,r.yg)("p",null,"Josh: added a ticket with a task list of C functions used in boot libraries that\nneed to be replaced for the JS backend.\nSee ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/24015"},"GHC#24015")),(0,r.yg)("p",null,"Jeff: Finished ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/22736"},"splitting")," the JS Backend IR, ",(0,r.yg)("inlineCode",{parentName:"p"},"JStat"),", into two: ",(0,r.yg)("inlineCode",{parentName:"p"},"JStg")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"JStat"),". This substantially cleans up the JS backend's DSL and makes it harder to write unsafe code in the DSL. More importantly this patch paves the way for the optimizer and for a more robust typed eDSL to express the JS Backend's runtime system in. See ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/10722"},"GHC!10722")," for more."),(0,r.yg)("p",null,'Luite: Worked on bringing back an optimizer for the JS backend. The goal is\nto reduce code size and memory consumption during linking. An initial version\nreduced code size of a "hello world" program by 26.9%, and additional analysis\nshould improve this more. See ',(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11507"},"GHC!11507")))}c.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>d});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),g=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=g(e.components);return a.createElement(s.Provider,{value:t},e.children)},h="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef(function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=g(n),u=r,d=h["".concat(s,".").concat(u)]||h[u]||c[u]||i;return n?a.createElement(d,o(o({ref:t},p),{},{components:n})):a.createElement(d,o({ref:t},p))});function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:r,o[1]=l;for(var g=2;g<i;g++)o[g]=n[g];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);