"use strict";(globalThis.webpackChunkengineering_iog_io=globalThis.webpackChunkengineering_iog_io||[]).push([[7767],{508:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(8168),r=(n(6540),n(5680));const i={slug:"2023-12-07-ghc-update",title:"IOG GHC Update #21",authors:["sylvain","doyougnu","luite","josh"],tags:["ghc","ghc-update"]},o=void 0,l={permalink:"/2023-12-07-ghc-update",editUrl:"https://github.com/input-output-hk/engineering/tree/master/blog/2023-12-07-ghc-update-21.md",source:"@site/blog/2023-12-07-ghc-update-21.md",title:"IOG GHC Update #21",description:"Triweekly update from the GHC DevX team at IOG.",date:"2023-12-07T00:00:00.000Z",formattedDate:"December 7, 2023",tags:[{label:"ghc",permalink:"/tags/ghc"},{label:"ghc-update",permalink:"/tags/ghc-update"}],readingTime:1.185,hasTruncateMarker:!0,authors:[{name:"Sylvain Henry",title:"Haskell DevX Engineer @ IOG",email:"sylvain.henry@iohk.io",key:"sylvain"},{name:"Jeffrey M. Young",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"doyougnu"},{name:"Luite Stegeman",title:"Haskell DevX Engineer @ IOG",email:"luite.stegeman@iohk.io",key:"luite"},{name:"Joshua Meredith",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"josh"}],frontMatter:{slug:"2023-12-07-ghc-update",title:"IOG GHC Update #21",authors:["sylvain","doyougnu","luite","josh"],tags:["ghc","ghc-update"]},prevItem:{title:"IOG GHC Update #22",permalink:"/2024-01-04-ghc-update"},nextItem:{title:"IOG GHC Update #20",permalink:"/2023-11-16-ghc-update"}},s={authorsImageUrls:[void 0,void 0,void 0,void 0]},p=[{value:"Performance",id:"performance",level:2},{value:"Maintenance",id:"maintenance",level:2}],g={toc:p},c="wrapper";function u({components:e,...t}){return(0,r.yg)(c,(0,a.A)({},g,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Triweekly update from the GHC DevX team at IOG."),(0,r.yg)("p",null,"Previous updates can be found ",(0,r.yg)("a",{parentName:"p",href:"https://engineering.iog.io/tags/ghc-update"},"here"),"."),(0,r.yg)("h2",{id:"performance"},"Performance"),(0,r.yg)("p",null,"Josh: worked on a tool to benchmark various configurations of tools in the Haskell ecosystem.\nThis tool is intented to track performance changes over time - originally motivated by a\nregression experienced by another team at IOG between GHC versions 8.10 and and 9.2. When\ncompleted, this tool will automatically run all permutations of the inputs and graph the results."),(0,r.yg)("p",null,"Sylvain: investigated and closed ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/21041"},"GHC#21041")," as the suggested change doesn't improve performance"),(0,r.yg)("p",null,"Jeff: Helped the cardano team with performance engineering the cardano-ledger. Tested two prospective patches and observed good evidence that one patch is worthy of further testing. "),(0,r.yg)("p",null,"Luite: Reimplemented the Z-encoder in Haskell and C for a 10-20x speedup over the\nexisting implementation. This allows us to remove the cached Z-encoded strings from the\nFastString table, reducing the amount of non-reclaimable memory used in a GHC\nsession ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11681"},"GHC!11681")),(0,r.yg)("h2",{id:"maintenance"},"Maintenance"),(0,r.yg)("p",null,"Sylvain: closed most\n",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/groups/ghc/-/issues/?label_name%5B%5D=Data%20Parallel%20Haskell"},"tickets"),"\nrelated to Data Parallel Haskell (DPH) and that are no longer relevant."),(0,r.yg)("p",null,"Sylvain: fixed issue with STG CSE optimization ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/14895"},"GHC#14895"),",\n",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/24233"},"GHC#24233"),", ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11715"},"GHC!11715"),"."),(0,r.yg)("p",null,"Sylvain: implemented ",(0,r.yg)("inlineCode",{parentName:"p"},"text"),"'s ",(0,r.yg)("inlineCode",{parentName:"p"},"measure_off")," function in pure Haskell ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/haskell/text/pull/548"},"text!548")),(0,r.yg)("p",null,"Sylvain: investigated and closed ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/issues/15485"},"GHC#15485"),". The upstream ",(0,r.yg)("inlineCode",{parentName:"p"},"unix")," issue is now tracked in ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/haskell/unix/issues/310"},"unix#310"),"."),(0,r.yg)("p",null,"Luite: fixed some foreign imports for the JS backend ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11447"},"GHC!11447")),(0,r.yg)("p",null,"Jeff: Modified the testsuite to track and record arbitrary metrics on bulid artifacts. ",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/merge_requests/11551"},"MR!11551")," is 90% done."))}u.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>m});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},g=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef(function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),c=p(n),h=r,m=c["".concat(s,".").concat(h)]||c[h]||u[h]||i;return n?a.createElement(m,o(o({ref:t},g),{},{components:n})):a.createElement(m,o({ref:t},g))});function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);