"use strict";(globalThis.webpackChunkengineering_iog_io=globalThis.webpackChunkengineering_iog_io||[]).push([[6456],{2634:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=a(8168),r=(a(6540),a(5680));const i={slug:"2022-12-13-ghc-js-backend-merged",title:"JavaScript backend merged into GHC",authors:["sylvain","doyougnu","luite","josh","moritz"],tags:["ghc","javascript","cross-compilation"]},o=void 0,s={permalink:"/2022-12-13-ghc-js-backend-merged",editUrl:"https://github.com/input-output-hk/engineering/tree/master/blog/2022-12-13-ghc-js-backend-merged.md",source:"@site/blog/2022-12-13-ghc-js-backend-merged.md",title:"JavaScript backend merged into GHC",description:"A new JavaScript backend was",date:"2022-12-13T00:00:00.000Z",formattedDate:"December 13, 2022",tags:[{label:"ghc",permalink:"/tags/ghc"},{label:"javascript",permalink:"/tags/javascript"},{label:"cross-compilation",permalink:"/tags/cross-compilation"}],readingTime:19.455,hasTruncateMarker:!0,authors:[{name:"Sylvain Henry",title:"Haskell DevX Engineer @ IOG",email:"sylvain.henry@iohk.io",key:"sylvain"},{name:"Jeffrey M. Young",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"doyougnu"},{name:"Luite Stegeman",title:"Haskell DevX Engineer @ IOG",email:"luite.stegeman@iohk.io",key:"luite"},{name:"Joshua Meredith",title:"Haskell DevX Engineer @ IOG",url:"https://iog.io/en/",key:"josh"},{name:"Moritz Angermann",title:"Head of DevX @ IOG",url:"https://iog.io/en/",key:"moritz"}],frontMatter:{slug:"2022-12-13-ghc-js-backend-merged",title:"JavaScript backend merged into GHC",authors:["sylvain","doyougnu","luite","josh","moritz"],tags:["ghc","javascript","cross-compilation"]},prevItem:{title:"GHC DevX Update 2023-01-12",permalink:"/2023-01-12-ghc-update"},nextItem:{title:"Model-Based Testing with QuickCheck",permalink:"/2022-09-28-introduce-q-d"}},l={authorsImageUrls:[void 0,void 0,void 0,void 0,void 0]},c=[{value:"Why JavaScript? Or, the Big Picture.",id:"why-javascript-or-the-big-picture",level:2}],p={toc:c},g="wrapper";function m({components:e,...t}){return(0,r.yg)(g,(0,n.A)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"A new JavaScript backend was\n",(0,r.yg)("a",{parentName:"p",href:"https://gitlab.haskell.org/ghc/ghc/-/commit/cc25d52e0f65d54c052908c7d91d5946342ab88a"},"merged"),"\ninto GHC on November 30th, 2022! This means that the next release of GHC will be\nable to emit code that runs in web browsers without requiring any extra tools,\nenabling Haskell for both front-end and back-end web applications."),(0,r.yg)("p",null,"In this post, we, the GHC DevX team at ",(0,r.yg)("a",{parentName:"p",href:"https://iohk.io/"},"IOG"),", describe the\nchallenges we faced bringing GHCJS to GHC, how we overcame those challenges, and\nwhat's left to do. This post is rather long so we've provided these links in\ncase you would like to skip ahead:"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"#ghcjs"},"Take me to the future of GHCJS"),(0,r.yg)("br",{parentName:"p"}),"\n",(0,r.yg)("a",{parentName:"p",href:"#expectations"},"Tell me what to expect"),(0,r.yg)("br",{parentName:"p"}),"\n",(0,r.yg)("a",{parentName:"p",href:"#roadmap"},"Show me the product roadmap"),(0,r.yg)("br",{parentName:"p"}),"\n",(0,r.yg)("a",{parentName:"p",href:"#contributing"},"Tell me how I can help"),(0,r.yg)("br",{parentName:"p"}),"\n",(0,r.yg)("a",{parentName:"p",href:"#build"},"Just show me how to hello world! (Skip to build instructions)")),(0,r.yg)("h2",{id:"why-javascript-or-the-big-picture"},"Why JavaScript? Or, the Big Picture."),(0,r.yg)("p",null,"To put it simply, the number of users on the internet is as low as it will ever\nbe ",(0,r.yg)("em",{parentName:"p"},"right now"),", and it is almost guaranteed that those users use JavaScript. At\ntime of writing, JavaScript holds 97.3% of client-side programming ",(0,r.yg)("a",{parentName:"p",href:"https://w3techs.com/technologies/details/cp-javascript"},"market\nshare")," (not to mention\nmarket share of front-end technologies). Furthermore, JavaScript is not going to\ndisappear anytime soon. As more and more interactivity is pushed onto the\ninternet, JavaScript will become more entrenched because of backwards\ncompatibility, network effects and the amount of capital already devoted to it.\nJavaScript, like C and\n",(0,r.yg)("a",{parentName:"p",href:"https://cacm.acm.org/news/244370-cobol-programmers-are-back-in-demand-seriously/fulltext?mobile=false"},"COBOL"),"\nwill be with us for the foreseeable future. This makes JavaScript an attractive\ntarget; it provides portability, allows us to capitalize on the massive\ninvestments in the language and platform, and essentially eliminates the risk\nthat the we build our technology atop a disappearing or deprecating foundation."),(0,r.yg)("p",null,"WebAssembly is a promising target as well, and ",(0,r.yg)("a",{parentName:"p",href:"https://www.tweag.io/"},"Tweag"),"\nhas just merged a ",(0,r.yg)("a",{parentName:"p",href:"https://www.tweag.io/blog/2022-11-22-wasm-backend-merged-in-ghc/"},"WebAssembly\nbackend")," into\nGHC (great work and congrats!). WebAssembly is not as ubiquitous as\nJavaScript yet, and has a harder time interacting with JavaScript directly.\nHence, we believe that the WebAssembly and JavaScript backends provide different\nstrengths, and it is to the Haskell community's benefit to have and support\nboth code generation paths in GHC for different use cases and requirements."))}m.isMDXComponent=!0},5680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>d});var n=a(6540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef(function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=c(a),h=r,d=g["".concat(l,".").concat(h)]||g[h]||m[h]||i;return a?n.createElement(d,o(o({ref:t},p),{},{components:a})):n.createElement(d,o({ref:t},p))});function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"}}]);