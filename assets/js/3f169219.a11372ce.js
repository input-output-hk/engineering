"use strict";(globalThis.webpackChunkengineering_iog_io=globalThis.webpackChunkengineering_iog_io||[]).push([[3814],{2889:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=n(8168),o=(n(6540),n(5680));const a={slug:"2023-04-14-io-sim-annoucement",title:"IOSim on Hackage!",authors:["coot"],tags:["haskell","io-sim","testing"],custom_edit_url:null},r=void 0,s={permalink:"/2023-04-14-io-sim-annoucement",editUrl:"https://github.com/input-output-hk/engineering/tree/master/blog/2023-04-14-io-sim-announcement.md",source:"@site/blog/2023-04-14-io-sim-announcement.md",title:"IOSim on Hackage!",description:"IOSim on Hackage",date:"2023-04-14T00:00:00.000Z",formattedDate:"April 14, 2023",tags:[{label:"haskell",permalink:"/tags/haskell"},{label:"io-sim",permalink:"/tags/io-sim"},{label:"testing",permalink:"/tags/testing"}],readingTime:15.635,hasTruncateMarker:!0,authors:[{name:"Marcin Szamotulski",title:"Network Team Lead",email:"marcin.szamotulski@iohk.io",key:"coot"}],frontMatter:{slug:"2023-04-14-io-sim-annoucement",title:"IOSim on Hackage!",authors:["coot"],tags:["haskell","io-sim","testing"],custom_edit_url:null},prevItem:{title:"IOG GHC Update #8",permalink:"/2023-04-20-ghc-update"},nextItem:{title:"IOG GHC Update #7",permalink:"/2023-04-06-ghc-update"}},l={authorsImageUrls:[void 0]},c=[{value:"IOSim on Hackage",id:"iosim-on-hackage",level:2}],m={toc:c},p="wrapper";function u({components:e,...t}){return(0,o.yg)(p,(0,i.A)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"iosim-on-hackage"},"IOSim on Hackage"),(0,o.yg)("p",null,"The IOG Networking Team is pleased to announce that we published ","[",(0,o.yg)("inlineCode",{parentName:"p"},"io-sim"),"]",",\n","[",(0,o.yg)("inlineCode",{parentName:"p"},"io-classes"),"]",", ","[",(0,o.yg)("inlineCode",{parentName:"p"},"si-timers"),"]",", ","[",(0,o.yg)("inlineCode",{parentName:"p"},"strict-stm"),"]",", ","[",(0,o.yg)("inlineCode",{parentName:"p"},"strict-mvar"),"]"," and\n","[",(0,o.yg)("inlineCode",{parentName:"p"},"io-classes-mtl"),"]"," on Hackage.  These are tools without which we could not\nimagine writing a complex distributed system like ","[Cardano]","."),(0,o.yg)("p",null,"These packages support our goal of using the same code to run in production and\nsimulation, what greatly increases the reliability and quality of the final\nsystem.  ","[",(0,o.yg)("inlineCode",{parentName:"p"},"io-sim"),"]"," and its ecosystem is designed to let write a simulation\nenvironment which provides provided things usually provided by an operating\nsystem like networking stack or disk IO and develop as well as implement\n& model complex applications/systems."),(0,o.yg)("p",null,"For developing a robust system one needs a proper testing framework which\nallows one to model the key characteristics of the system.  To achieve this\ngoal we needed to create an abstraction that captures the key aspects of the\nHaskell runtime and operating system environment for distributed systems.  The\nCardano ","[network stack][ouroboros-network]"," is a highly concurrent system, and\nas a network application, it needs to deal with time: there are all sorts of\ntimeouts that guard resource usage: inactivity timeouts, message timeouts, or\nan application level ",(0,o.yg)("inlineCode",{parentName:"p"},"TCP"),"'s ",(0,o.yg)("inlineCode",{parentName:"p"},"WAIT_TIMEOUT")," among others.  The tools which we\nprovide permitted us to capture issues related to timing (which abound in\nnetwork programming) which, in production, would be extremely rare (things like\nsimultaneous TCP open or critical race conditions) and ensure that we can test\n(in the simulation) these scenarios.  Recently we caught\na ","[bug][sim-tcp-open-bug]"," in simultaneous TCP open when one side of the\nconnection crashed - a corner case of a corner case, that's how effective is\nthe combination of quickcheck style property-based testing & simulation!"))}u.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>m,yg:()=>d});var i=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef(function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),p=c(n),g=o,d=p["".concat(l,".").concat(g)]||p[g]||u[g]||a;return n?i.createElement(d,r(r({ref:t},m),{},{components:n})):i.createElement(d,r({ref:t},m))});function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"}}]);